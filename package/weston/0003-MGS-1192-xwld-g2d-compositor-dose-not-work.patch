From ec10a00887c65113b11187f4a8db1fed0c5d89ec Mon Sep 17 00:00:00 2001
Message-Id: <ec10a00887c65113b11187f4a8db1fed0c5d89ec.1476965418.git.keller@fs-net.de>
In-Reply-To: <1bbe4f4c985819c8f8ead54288ca1cc8a4b7f51f.1476965418.git.keller@fs-net.de>
References: <1bbe4f4c985819c8f8ead54288ca1cc8a4b7f51f.1476965418.git.keller@fs-net.de>
From: Hartmut Keller <keller@fs-net.de>
Date: Wed, 19 Oct 2016 15:45:52 +0200
Subject: [PATCH 03/12] MGS-1192: xwld: g2d compositor dose not work

Initial the backend->use_gal2d by input parameters.

Upstream-Status: Inappropriate [i.MX specific]

Signed-off-by: Yong Gan <yong.gan@freescale.com>
---
 src/compositor-fbdev.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/src/compositor-fbdev.c b/src/compositor-fbdev.c
index 548f1e5..de3d5a8 100644
--- a/src/compositor-fbdev.c
+++ b/src/compositor-fbdev.c
@@ -811,7 +811,8 @@ fbdev_backend_create(struct weston_compositor *compositor, int *argc, char *argv
 	backend->base.restore = fbdev_restore;
 
 	backend->prev_state = WESTON_COMPOSITOR_ACTIVE;
-	backend->use_pixman = !param->use_gl;
+	backend->use_pixman = !(param->use_gl || param->use_gal2d);
+	backend->use_gal2d = param->use_gal2d;
 	backend->output_transform = param->output_transform;
 
 	weston_setup_vt_switch_bindings(compositor);
-- 
1.7.4.4

